@import uk.gov.hmrc.payetaxcalculatorfrontend.model.YouHaveToldUsItem
@import uk.gov.hmrc.payetaxcalculatorfrontend.model.Salary
@import uk.gov.hmrc.payetaxcalculatorfrontend.views.html.main_template
@import uk.gov.hmrc.payetaxcalculatorfrontend.views.html.quickcalc.you_have_told_us
@import uk.gov.hmrc.payetaxcalculatorfrontend.views.html.quickcalc.salary_amount_input
@import uk.gov.hmrc.payetaxcalculatorfrontend.views.html.quickcalc.salary_radio_box
@import uk.gov.hmrc.play.views.html._
@import uk.gov.hmrc.payetaxcalculatorfrontend.controllers
@import play.api.i18n._
@import views.html.helper._

@(form: Form[Salary], youHaveToldUsItems: List[YouHaveToldUsItem])(implicit request: Request[_], messages: Messages)

@radioField = @{ form("salaryType") }
@radioElements = @{ FieldElements(radioField.id, radioField, null, Map.empty, messages) }

@scriptProvidingTogglingOfRadioButtons = {
  <script src='@routes.Assets.at("javascripts/shame.js")' type="text/javascript"></script>
}

@main_template(title = Messages("quick_calc.title"), mainClass = Some("full-width"), scriptElem = Some(scriptProvidingTogglingOfRadioButtons)) {

  <div class="grid-layout">

    <div class="grid-layout__column grid-layout__column--2-3">

    <header class="page-header">
        <h1>@Messages("quick_calc.salary.header")</h1>
    </header>

    <h2 class="heading-medium">@Messages("quick_calc.salary.question.How_you_paid")</h2>

      @helpers.form(action = controllers.routes.QuickCalcController.submitSalaryForm) {
        <div class="form-group">

          <fieldset class="form-field-group js-visible js-aria-show @if(radioElements.hasErrors){ form-field-error } js-toggle-shame"
                    id="us-number"
                    data-trigger="js-toggle-trigger">

            @radioElements.errors.map { error => <span class="error-notification">@Messages(error)</span> }

            @salary_radio_box(radioElements, Messages("quick_calc.salary.year"), "yearly")
            @salary_amount_input(form("amount-yearly"), Messages("quick_calc.salary.question.earn_a_year"), visible = radioField.value.contains("yearly"))

            @salary_radio_box(radioElements, Messages("quick_calc.salary.month"), "monthly")
            @salary_amount_input(form("amount-monthly"), Messages("quick_calc.salary.question.earn_a_month"), visible = radioField.value.contains("monthly"))

            @salary_radio_box(radioElements, Messages("quick_calc.salary.week"), "weekly")
            @salary_amount_input(form("amount-weekly"), Messages("quick_calc.salary.question.earn_a_week"), visible = radioField.value.contains("weekly"))

            @salary_radio_box(radioElements, Messages("quick_calc.salary.day"), "daily")
            @salary_amount_input(
              form("amount-daily"),
              Messages("quick_calc.salary.question.earn_a_day"),
              radioField.value.contains("daily"),
              Some(Messages("quick_calc.salary.question.days_a_week")),
              Some(form("howManyDaysAWeek-daily"))
            )

            @salary_radio_box(radioElements, Messages("quick_calc.salary.hour"), "hourly")
            @salary_amount_input(
              form("amount-hourly"),
              Messages("quick_calc.salary.question.earn_a_hour"),
              radioField.value.contains("hourly"),
              Some(Messages("quick_calc.salary.question.hours_a_week")),
              Some(form("howManyHoursAWeek-hourly"))
            )


          </fieldset>
        </div>

        <div class="form-group">
          <input type="submit" class="button" value="@Messages("continue")">
        </div>
      }


    </div>

    <div class="grid-layout__column grid-layout__column--1-3">
      @you_have_told_us(youHaveToldUsItems)
    </div>

  </div>

}
