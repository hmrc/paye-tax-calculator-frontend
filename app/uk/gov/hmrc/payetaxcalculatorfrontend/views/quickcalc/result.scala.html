@import play.api.i18n._
@import uk.gov.hmrc.payetaxcalculatorfrontend.views.html.main_template
@import uk.gov.hmrc.payetaxcalculatorfrontend.views.html.quickcalc.you_have_told_us
@import uk.gov.hmrc.payetaxcalculatorfrontend.model.TaxResult._
@import uk.gov.hmrc.payetaxcalculatorfrontend.model.QuickCalcAggregateInput

@(quickCalcAggregateInput: QuickCalcAggregateInput)(implicit request: Request[_], messages: Messages)
@summary = @{taxCalculation(quickCalcAggregateInput)}
@tabLabels = @{List(Messages("quick_calc.result.tabLabels.year"),
                    Messages("quick_calc.result.tabLabels.month"),
                    Messages("quick_calc.result.tabLabels.week"))}

@main_template(title = Messages("quick_calc.title"), mainClass = Some("full-width")) {
  <div class="grid-layout">
    <div class="grid-layout__column grid-layout__column--2-3">
      <header class="page-header">
        <h1>@Messages("quick_calc.result.header")</h1>
      </header>

      <div data-tabs style="margin-top: 70px">
        <ul class="tabs-nav" role="tablist">
          @for((breakdown,label)<- summary.taxBreakdown.zip(tabLabels)) {
            <li
            id=@{breakdown.period}
            role="tab"
            data-tab-link=@{breakdown.period}
            aria-selected="true"
            aria-controls=@{"tabContent"+breakdown.period}>
              <span class="tabs-nav__tab tabs-nav__tab--active"
              href="#">@label</span>
            </li>
          }
        </ul>

        <ul>
          @for((breakdown,label)<- summary.taxBreakdown.zip(tabLabels)) {
            <li id=@{"tabContent"+breakdown.period}
            data-tab-content=@{breakdown.period}
              class="tab-content"
              role="tabpanel"
              aria-labelledby=@{breakdown.period}>
              <p class="tab-content__first">
                <div class="data">
                  <span class="data-item bold-xxlarge">£@{breakdown.takeHomePay}</span><br/>
                  <span class="data-item bold-xsmall">@Messages("quick_calc.result.you_take_home")</span>
                </div>
                  <br>
                <div class="data">
                  <span class="data-item bold-xlarge" id="grossPay-@label">£@{breakdown.grossPay}</span><br>
                  <span class="data-item bold-xsmall" id="">@Messages("quick_calc.result.gross_pay")</span>
                </div>
                <br>
                <div class="data">
                  <span class="data-item bold-xlarge">£@{breakdown.totalDeductions}</span><br/>
                  <span class="data-item bold-xsmall">@Messages("quick_calc.result.total_deductions")</span>
                </div><br/>
                <table>
                  <thead>
                    <tr>
                      <th colspan="2">@Messages("quick_calc.result.income")</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>@Messages("quick_calc.result.gross_pay")</td>
                      <td>£@{breakdown.grossPay}</td>
                    </tr>
                    <tr>
                      <td>@Messages("quick_calc.result.tax_free_allowance")</td>
                      <td>£@{breakdown.taxFreePay}</td>
                    </tr>
                    <tr>
                      <td>@Messages("quick_calc.result.taxable_pay")</td>
                      <td>£@{breakdown.taxablePay}</td>
                    </tr>
                  </tbody>
                </table>
                <table>
                  <thead>
                    <tr>
                      <th colspan="2">@Messages("quick_calc.result.deductions")</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>@Messages("quick_calc.result.income_tax")</td>
                      <td>£@{breakdown.taxCategories.head.total}</td>
                    </tr>
                    <tr>
                      <td>@Messages("quick_calc.result.your_national_insurance")</td>
                      <td>£@{breakdown.taxCategories(1).total}</td>
                    </tr>
                    <tr>
                      <td>@Messages("quick_calc.result.your_employer_national_insurance")</td>
                      <td>£@{breakdown.taxCategories(2).total}</td>
                    </tr>
                    <tr>
                      <td>@Messages("quick_calc.result.your_average_rate_is")</td>
                      <td>@{summary.averageAnnualTaxRate}%</td>
                    </tr>
                    <tr>
                      <td>@Messages("quick_calc.result.your_marginal_rate_is")</td>
                      <td>@{summary.marginalTaxRate}%</td>
                    </tr>
                  </tbody>
                </table>
              </p>
            </li>
          }
        </ul>
      </div>

    </div>
    <div class="grid-layout__column grid-layout__column--1-3">
      @you_have_told_us(quickCalcAggregateInput.youHaveToldUsItems)
    </div>

  </div>

}
